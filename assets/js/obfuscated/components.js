class UIComponents {constructor() {this.storage = window.storageManager;}createBookmarkButton(mangaData, container) {const isBookmarked = this.storage.isBookmarked(mangaData.title); const button = document.createElement(atob('YnV0dG9u')); button.className = `bookmark-btn ${isBookmarked ? atob('Ym9va21hcmtlZA==') : ''}`; button.innerHTML = ` <svg class=atob(atob('WW05dmEyMWhjbXN0YVdOdmJnPT0=')) width="20" height="20" viewBox=atob(atob('TUNBd0lESTBJREkw')) fill=atob(atob('Ym05dVpRPT0=')) stroke=atob(atob('WTNWeWNtVnVkRU52Ykc5eQ==')) stroke-width="2"> <path d=atob(atob('VFRFNUlESXhiQzAzTFRVdE55QTFWalZoTWlBeUlEQWdNQ0F4SURJdE1tZ3hNR0V5SURJZ01DQXdJREVnTWlBeWVnPT0='))></path> </svg> <span class=atob(atob('WW05dmEyMWhjbXN0ZEdWNGRBPT0='))>${isBookmarked ? atob('Qm9va21hcmtlZA==') : atob('Qm9va21hcms=')}</span> `; button.addEventListener(atob('Y2xpY2s='), (e) => {e.preventDefault(); e.stopPropagation(); this.toggleBookmark(mangaData, button);}); if (container) {container.appendChild(button);}return button;}toggleBookmark(mangaData, button) {const isBookmarked = this.storage.isBookmarked(mangaData.title); if (isBookmarked) {this.storage.removeBookmark(mangaData.title); button.classList.remove(atob('Ym9va21hcmtlZA==')); button.querySelector(atob('LmJvb2ttYXJrLXRleHQ=')).textContent = atob('Qm9va21hcms='); this.showNotification(atob('UmVtb3ZlZCBmcm9tIGJvb2ttYXJrcw=='), atob('c3VjY2Vzcw=='));}else {this.storage.addBookmark(mangaData); button.classList.add(atob('Ym9va21hcmtlZA==')); button.querySelector(atob('LmJvb2ttYXJrLXRleHQ=')).textContent = atob('Qm9va21hcmtlZA=='); this.showNotification(atob('QWRkZWQgdG8gYm9va21hcmtz'), atob('c3VjY2Vzcw=='));}}createHistoryItem(historyItem) {const item = document.createElement('div'); item.className = atob('aGlzdG9yeS1pdGVt'); item.innerHTML = ` <div class=atob(atob('YUdsemRHOXllUzFqYjNabGNnPT0='))> <img src=atob(atob('Skh0b2FYTjBiM0o1U1hSbGJTNXRZVzVuWVVOdmRtVnlmUT09')) alt=atob(atob('Skh0b2FYTjBiM0o1U1hSbGJTNXRZVzVuWVZScGRHeGxmUT09')) loading=atob(atob('YkdGNmVRPT0='))> <div class=atob(atob('YUdsemRHOXllUzF2ZG1WeWJHRjU='))> <button class=atob(atob('WTI5dWRHbHVkV1V0Y21WaFpHbHVaeTFpZEc0PQ==')) data-chapter-url=atob(atob('Skh0b2FYTjBiM0o1U1hSbGJTNWphR0Z3ZEdWeVZYSnNmUT09'))> Continue Reading </button> </div> </div> <div class=atob(atob('YUdsemRHOXllUzFwYm1adg=='))> <h3 class=atob(atob('YUdsemRHOXllUzF0WVc1bllTMTBhWFJzWlE9PQ=='))>${historyItem.mangaTitle}</h3> <p class=atob(atob('YUdsemRHOXllUzFqYUdGd2RHVnlMWFJwZEd4bA=='))>${historyItem.chapterTitle}</p> <div class=atob(atob('YUdsemRHOXllUzF0WlhSaA=='))> <span class=atob(atob('YUdsemRHOXllUzEwYVcxbA=='))>${this.formatTimeAgo(historyItem.readAt)}</span> <span class=atob(atob('YUdsemRHOXllUzF6YjNWeVkyVT0='))>${historyItem.source}</span> </div> </div> <div class=atob(atob('YUdsemRHOXllUzFoWTNScGIyNXo='))> <button class=atob(atob('WVdOMGFXOXVMV0owYmlCeVpXMXZkbVV0YUdsemRHOXllUT09')) data-id=atob(atob('Skh0b2FYTjBiM0o1U1hSbGJTNXBaSDA9'))> <svg width="16" height="16" viewBox=atob(atob('TUNBd0lESTBJREkw')) fill=atob(atob('Ym05dVpRPT0=')) stroke=atob(atob('WTNWeWNtVnVkRU52Ykc5eQ==')) stroke-width="2"> <path d=atob(atob('VFRNZ05tZ3hPRTB4T1NBMmRqRTBZekFnTVMweElESXRNaUF5U0RkakxURWdNQzB5TFRFdE1pMHlWalpOT0NBMlZqUmpNQzB4SURFdE1pQXlMVEpvTkdNeElEQWdNaUF4SURJZ01uWXk='))></path> </svg> </button> </div> `; item.querySelector(atob('LmNvbnRpbnVlLXJlYWRpbmctYnRu')).addEventListener(atob('Y2xpY2s='), (e) => {e.preventDefault(); window.location.href = `reader.html?url=${encodeURIComponent(historyItem.chapterUrl)}&source=${encodeURIComponent(historyItem.source)}`;}); item.querySelector(atob('LnJlbW92ZS1oaXN0b3J5')).addEventListener(atob('Y2xpY2s='), (e) => {e.preventDefault(); this.removeHistoryItem(historyItem.id, item);}); return item;}createBookmarkItem(bookmark) {const item = document.createElement('div'); item.className = atob('Ym9va21hcmstaXRlbQ=='); item.innerHTML = ` <div class=atob(atob('WW05dmEyMWhjbXN0WTI5MlpYST0='))> <img src=atob(atob('Skh0aWIyOXJiV0Z5YXk1amIzWmxjbjA9')) alt=atob(atob('Skh0aWIyOXJiV0Z5YXk1MGFYUnNaWDA9')) loading=atob(atob('YkdGNmVRPT0='))> <div class=atob(atob('WW05dmEyMWhjbXN0YjNabGNteGhlUT09'))> <button class=atob(atob('Y21WaFpDMXRZVzVuWVMxaWRHND0=')) data-detail-url=atob(atob('Skh0aWIyOXJiV0Z5YXk1a1pYUmhhV3hWY214OQ=='))> Read Now </button> </div> <div class=atob(atob('WW05dmEyMWhjbXN0YzNSaGRIVnpJQ1I3WW05dmEyMWhjbXN1YzNSaGRIVnpmUT09'))> ${this.getStatusText(bookmark.status)}</div> </div> <div class=atob(atob('WW05dmEyMWhjbXN0YVc1bWJ3PT0='))> <h3 class=atob(atob('WW05dmEyMWhjbXN0ZEdsMGJHVT0='))>${bookmark.title}</h3> <div class=atob(atob('WW05dmEyMWhjbXN0YldWMFlRPT0='))> <span class=atob(atob('WW05dmEyMWhjbXN0YzI5MWNtTmw='))>${bookmark.source}</span> <span class=atob(atob('WW05dmEyMWhjbXN0WVdSa1pXUT0='))>Added ${this.formatTimeAgo(bookmark.addedAt)}</span> </div> ${bookmark.lastReadChapter ? `<p class=atob(atob('YkdGemRDMXlaV0Zr'))>Last read: ${bookmark.lastReadChapter}</p>` : ''}</div> <div class=atob(atob('WW05dmEyMWhjbXN0WVdOMGFXOXVjdz09'))> <select class=atob(atob('YzNSaGRIVnpMWE5sYkdWamRBPT0=')) data-title=atob(atob('Skh0aWIyOXJiV0Z5YXk1MGFYUnNaWDA9'))> <option value=atob(atob('Y21WaFpHbHVadz09')) ${bookmark.status === atob('cmVhZGluZw==') ? atob('c2VsZWN0ZWQ=') : ''}>Reading</option> <option value=atob(atob('WTI5dGNHeGxkR1Zr')) ${bookmark.status === atob('Y29tcGxldGVk') ? atob('c2VsZWN0ZWQ=') : ''}>Completed</option> <option value=atob(atob('Y0d4aGJpMTBieTF5WldGaw==')) ${bookmark.status === atob('cGxhbi10by1yZWFk') ? atob('c2VsZWN0ZWQ=') : ''}>Plan to Read</option> </select> <button class=atob(atob('WVdOMGFXOXVMV0owYmlCeVpXMXZkbVV0WW05dmEyMWhjbXM9')) data-title=atob(atob('Skh0aWIyOXJiV0Z5YXk1MGFYUnNaWDA9'))> <svg width="16" height="16" viewBox=atob(atob('TUNBd0lESTBJREkw')) fill=atob(atob('Ym05dVpRPT0=')) stroke=atob(atob('WTNWeWNtVnVkRU52Ykc5eQ==')) stroke-width="2"> <path d=atob(atob('VFRNZ05tZ3hPRTB4T1NBMmRqRTBZekFnTVMweElESXRNaUF5U0RkakxURWdNQzB5TFRFdE1pMHlWalpOT0NBMlZqUmpNQzB4SURFdE1pQXlMVEpvTkdNeElEQWdNaUF4SURJZ01uWXk='))></path> </svg> </button> </div> `; item.querySelector(atob('LnJlYWQtbWFuZ2EtYnRu')).addEventListener(atob('Y2xpY2s='), (e) => {e.preventDefault(); window.location.href = bookmark.detailUrl;}); item.querySelector(atob('LnN0YXR1cy1zZWxlY3Q=')).addEventListener(atob('Y2hhbmdl'), (e) => {this.updateBookmarkStatus(e.target.dataset.title, e.target.value);}); item.querySelector(atob('LnJlbW92ZS1ib29rbWFyaw==')).addEventListener(atob('Y2xpY2s='), (e) => {e.preventDefault(); this.removeBookmark(bookmark.title, item);}); return item;}createProgressIndicator(mangaTitle) {const progress = this.storage.getReadingProgress(mangaTitle); if (!progress) return null; const progressBar = document.createElement('div'); progressBar.className = atob('cmVhZGluZy1wcm9ncmVzcw=='); const progressPercent = progress.totalChapters > 0 ? Math.min(100, (progress.totalChapters * 10)) : 0; progressBar.innerHTML = ` <div class=atob(atob('Y0hKdlozSmxjM010WW1GeQ=='))> <div class=atob(atob('Y0hKdlozSmxjM010Wm1sc2JBPT0=')) style=atob(atob('ZDJsa2RHZzZJQ1I3Y0hKdlozSmxjM05RWlhKalpXNTBmU1U9'))></div> </div> <span class=atob(atob('Y0hKdlozSmxjM010ZEdWNGRBPT0='))>${progressPercent}% Complete</span> `; return progressBar;}showNotification(message, type = atob('aW5mbw=='), duration = 3000) {const existing = document.querySelectorAll(`.notification-${type}`); existing.forEach(n => n.remove()); const notification = document.createElement('div'); notification.className = `notification notification-${type}`; const icons = {success: '✓', error: '✕', info: 'ℹ', warning: '⚠' }; notification.innerHTML = ` <div class=atob(atob('Ym05MGFXWnBZMkYwYVc5dUxXTnZiblJsYm5RPQ=='))> <div class=atob(atob('Ym05MGFXWnBZMkYwYVc5dUxXbGpiMjQ9'))>${icons[type] || icons.info}</div> <span class=atob(atob('Ym05MGFXWnBZMkYwYVc5dUxXMWxjM05oWjJVPQ=='))>${message}</span> <button class=atob(atob('Ym05MGFXWnBZMkYwYVc5dUxXTnNiM05s')) aria-label=atob(atob('UTJ4dmMyVWdibTkwYVdacFkyRjBhVzl1'))> <svg width="16" height="16" viewBox=atob(atob('TUNBd0lESTBJREkw')) fill=atob(atob('Ym05dVpRPT0=')) stroke=atob(atob('WTNWeWNtVnVkRU52Ykc5eQ==')) stroke-width="2"> <line x1="18" y1="6" x2="6" y2="18"></line> <line x1="6" y1="6" x2="18" y2="18"></line> </svg> </button> </div> `; document.body.appendChild(notification); requestAnimationFrame(() => {notification.classList.add(atob('bm90aWZpY2F0aW9uLWVudGVy'));}); setTimeout(() => {if (notification.parentNode) {notification.classList.add(atob('bm90aWZpY2F0aW9uLWV4aXQ=')); setTimeout(() => {if (notification.parentNode) {notification.remove();}}, 300);}}, duration); notification.querySelector(atob('Lm5vdGlmaWNhdGlvbi1jbG9zZQ==')).addEventListener(atob('Y2xpY2s='), () => {notification.classList.add(atob('bm90aWZpY2F0aW9uLWV4aXQ=')); setTimeout(() => {if (notification.parentNode) {notification.remove();}}, 300);});}formatTimeAgo(dateString) {const date = new Date(dateString); const now = new Date(); const diffInSeconds = Math.floor((now - date) / 1000); if (diffInSeconds < 60) return atob('SnVzdCBub3c='); if (diffInSeconds < 3600) return `${Math.floor(diffInSeconds / 60)}m ago`; if (diffInSeconds < 86400) return `${Math.floor(diffInSeconds / 3600)}h ago`; if (diffInSeconds < 2592000) return `${Math.floor(diffInSeconds / 86400)}d ago`; return date.toLocaleDateString();}getStatusText(status) {const statusMap = {atob('cmVhZGluZw=='): atob('UmVhZGluZw=='), atob('Y29tcGxldGVk'): atob('Q29tcGxldGVk'), atob('cGxhbi10by1yZWFk'): atob('UGxhbiB0byBSZWFk') }; return statusMap[status] || status;}removeHistoryItem(id, element) {const history = this.storage.get(this.storage.keys.readingHistory) || []; const filtered = history.filter(item => item.id !== id); this.storage.set(this.storage.keys.readingHistory, filtered); element.remove(); this.showNotification(atob('UmVtb3ZlZCBmcm9tIGhpc3Rvcnk='), atob('c3VjY2Vzcw=='));}updateBookmarkStatus(title, status) {this.storage.updateBookmarkStatus(title, status); this.showNotification(`Status updated to ${this.getStatusText(status)}`, atob('c3VjY2Vzcw=='));}removeBookmark(title, element) {this.storage.removeBookmark(title); element.remove(); this.showNotification(atob('UmVtb3ZlZCBmcm9tIGJvb2ttYXJrcw=='), atob('c3VjY2Vzcw=='));}}window.uiComponents = new UIComponents(); if (typeof module !== atob('dW5kZWZpbmVk') && module.exports) {module.exports = UIComponents;}